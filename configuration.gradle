project.ext {

  cfgVersion = '0.4.2'

  cfgGroup = 'de.konstanz.isc'

  cfgCopyDependencies = false

  cfgCopyToRoot = false

  javaProjects = subprojects

  jarDefaultImportPackageVersion = ";version=0"

  distributionProjects = subprojects.findAll {
    it.getPath() == ":th-e-core-api" ||
    it.getPath() == ":th-e-core-components" ||
    it.getPath() == ":th-e-ctrl"
  }

  docProjects = distributionProjects.findAll {
    it.getPath() == ":th-e-core-api" ||
    it.getPath() == ":th-e-core-components"
  }

}

configure(javaProjects) {
  apply plugin: "java"
  apply plugin: "maven"
}

tasks.withType(Tar) {

  into(project.name) {

    from("build") {
      include "libs/**"
    }

    from("./") {
      include "LICENSE**"
      include "NOTICE**"
      include "libs/**"
      include "conf/**"
      include "dependencies/**"
    }

    for (Project myproject: distributionProjects) {
      from (myproject.getProjectDir().toString()) {
        include "dependencies/**"
	  }
    }

    if (name.equals("tar")) {
      exclude "**/dependencies/**/src"
    }
  }
}
